# Subset Documentation

## Overview

This document provides an overview of the subset format generated by the `extract_dataset.py` script. The subset contains processed information from JSONL files, including metadata, sections, paragraphs, cited references, and external URIs.

## Subset Format

Each subset file is in JSON Lines format, where each line is a JSON object representing a paper. The structure of each JSON object is as follows:

- `paper_id`: The arXiv ID of the paper.
- `title`: The title of the paper.
- `authors`: A list of authors of the paper.
- `year`: The year the paper was updated.
- `doi`: The DOI of the paper.
- `sections`: A list of sections in the paper.

### Section Object

Each section object contains the following fields:

- `section_number`: The number of the section.
- `section_name`: The name of the section.
- `paragraphs`: A list of paragraphs in the section.

### Paragraph Object

Each paragraph object contains the following fields:

- `text`: The text content of the paragraph.
- `cited_references`: A list of cited references in the paragraph.
- `external_uris`: A list of external URIs found in the paragraph.

### Cited Reference Object

Each cited reference object contains the following fields:

- `arxiv_id`: The arXiv ID of the cited reference (if available).
- `doi`: The DOI of the cited reference (if available).
- `bib_entry_raw`: The raw bibliographic entry of the cited reference.

## Example JSON Object

Here is an example of a JSON object that might be found in the subset:

```json
{
  "paper_id": "2105.05862",
  "title": "Example Paper Title",
  "authors": [
    {"first": "John", "last": "Doe"},
    {"first": "Jane", "last": "Smith"}
  ],
  "year": "2021",
  "doi": "10.1234/example.doi",
  "sections": [
    {
      "section_number": "1",
      "section_name": "Introduction",
      "paragraphs": [
        {
          "text": "This is the first paragraph of the introduction.",
          "cited_references": [
            {
              "arxiv_id": "1234.5678",
              "doi": "10.1234/example.doi",
              "bib_entry_raw": "J. Doe, Example Reference, Journal of Examples, 2021."
            }
          ],
          "external_uris": [
            "https://example.com"
          ]
        },
        {
          "text": "This is the second paragraph of the introduction.",
          "cited_references": [],
          "external_uris": []
        }
      ]
    },
    {
      "section_number": "2",
      "section_name": "Related Work",
      "paragraphs": [
        {
          "text": "This is a paragraph in the related work section.",
          "cited_references": [],
          "external_uris": [
            "https://relatedwork.com"
          ]
        }
      ]
    }
  ]
}
```

## Usage

To generate the subset, run the `extract_dataset.py` script with the input and output directories as arguments:

```sh
python extract_dataset.py <input_directory> <output_directory> [--include_text] [--axriv_only]
```

--text is an optional parameter that will extract the full text of the paper. This will increase the size of the output files.
--arxiv_only is an optional parameter that will only extract papers with arXiv IDs.